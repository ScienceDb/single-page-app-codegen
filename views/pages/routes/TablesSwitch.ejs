import React from 'react';
import { 
  Switch,
  Route
} from 'react-router-dom'
import PropTypes from 'prop-types';

<%for( i=0; i<models.length; i++ ){-%>
import <%- models[i].nameCp %>Table from './modelsTables/<%- models[i].nameLc _%>Table/<%- models[i].nameCp _%>EnhancedTable'
<%}-%>
<%for( i=0; i<adminModels.length; i++ ){-%>
import <%- adminModels[i].nameCp %>Table from './adminTables/<%- adminModels[i].nameLc _%>Table/<%- adminModels[i].nameCp _%>EnhancedTable'
<%}-%>
import NotFoundSection from '../pages/NotFoundSectionPage'
import NoPermissionSectionPage from '../pages/NoPermissionSectionPage'

export default function TablesSwitch(props) {
  const { permissions } = props;

  return (
    
    <Switch>

        {/* Models */}
<%for( i=0; i<models.length; i++ ){-%>
        <Route exact path="/main/model/<%- models[i].nameLc _%>" 
          render={
            /* acl check */
            (permissions&&permissions.<%- models[i].nameLc _%>&&Array.isArray(permissions.<%- models[i].nameLc _%>)
            &&(permissions.<%- models[i].nameLc _%>.includes('read') || permissions.<%- models[i].nameLc _%>.includes('*')))
            ? ((props) => <<%- models[i].nameCp _%>Table {...props} permissions={permissions}/>) : (NoPermissionSectionPage)
        } />
<%}-%>

        {/* Admin models */}
<%for( i=0; i<adminModels.length; i++ ){-%>
        <Route exact path="/main/admin/<%- adminModels[i].nameLc _%>" 
          component={
            /* acl check */
            (permissions&&permissions.<%- adminModels[i].nameLc _%>&&Array.isArray(permissions.<%- adminModels[i].nameLc _%>)
            &&(permissions.<%- adminModels[i].nameLc _%>.includes('read') || permissions.<%- adminModels[i].nameLc _%>.includes('*')))
            ? ((props) => <<%- adminModels[i].nameCp _%>Table {...props} permissions={permissions}/>) : (NoPermissionSectionPage)
        } />
<%}-%>

        {/* Default */}
        <Route path="/main/" component={NotFoundSection} />

    </Switch>
  );
}

TablesSwitch.propTypes = {
  permissions: PropTypes.object,
};
